{"version":3,"sources":["userController.js","globalController.js","navController.js","galleryController.js"],"names":[],"mappings":"AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AClDA;AACA;AACA;AACA;ACHA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACvCA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"controllers.js","sourcesContent":["mainApp.controller('userController', ['$scope', '$http', '$location', 'userModel', function($scope, $http, $location, userModel){\r\n\t\r\n\t//extend() - \r\n\tangular.extend($scope, {\r\n\t\tdoLogin: function() {\r\n\t\t\tvar auth = {\r\n\t\t\t\temail: $scope.login.email,\r\n\t\t\t\tpassword: $scope.login.password\r\n\t\t\t};\r\n\t\t\tuserModel.getLogin(auth).then(function(){\r\n\t\t\t\t$location.path('/dashboard');\r\n\t\t\t});\r\n\t\t}\r\n\t\t//move doLogout() inside menu, navController\r\n\t\t//doLogout: function() {\r\n\t\t//\tuserModel.getLogout();\r\n\t\t//\t$location.path('/');\r\n\t\t//}\r\n\r\n\t});\r\n\r\n\tangular.extend($scope, {\r\n\t\tlogin: {\r\n\t\t\temail: 'ivan@ivan.com',\r\n\t\t\tpassword: 'ivan'\r\n\t\t}\r\n\t});\r\n}]);\r\n\r\n//********Controller without repository*************\r\n//return $http({\r\n//\theaders: {\r\n//\t\t'Content-type': 'application/json'\r\n//\t},\r\n//\turl: baseUrl + 'auth',\r\n//\tmethod: \"POST\",\r\n//\tdata: {\r\n//\t\temail: loginData.email,\r\n//\t\tpassword: loginData.password\r\n//\t}\r\n//})\r\n//\t.success(function(response){\r\n//\t\tconsole.log(response);\r\n//\t\t//JSON.parse() is for \"parsing\" something that was received as JSON.\r\n//\t\t//JSON.stringify() is to create a JSON string out of an object/array.\r\n//\t\t//$cookies.put('auth', JSON.stringify(response));\r\n//\t\t$cookies.put('auth', response);\r\n//\t})\r\n//\t.error(function(response, status, headers){\r\n//\t\talert(response);\r\n//\t});","mainApp.controller('globalController', ['$scope', function($scope) {\r\n    $scope.global = {};\r\n    $scope.global.navUrl = 'templates/partials/nav.html'\r\n}]);","mainApp.controller('navController', ['$scope', 'userModel', '$location', function($scope, userModel, $location) {\r\n\r\n    //vars\r\n    angular.extend($scope, {\r\n        user: userModel.getUserObject(),\r\n        navUrl: [{\r\n            link: 'Home',\r\n            url: '/dashboard',\r\n            //dropdown links\r\n            subMenu: [\r\n                {\r\n                    link: 'View Gallery',\r\n                    url: '/gallery/view'\r\n                },\r\n                {\r\n                    link: 'Add Gallery',\r\n                    url: '/gallery/add'\r\n                }\r\n            ]\r\n        },  //one more menu item\r\n            {\r\n                link: 'Test',\r\n                url: '/test'\r\n            }\r\n        ]\r\n    });\r\n\r\n    //methods\r\n    angular.extend($scope, {\r\n        doLogout: function() {\r\n            userModel.getLogout();\r\n            $location.path('/');\r\n        },\r\n        checkActiveLink: function(routeLink) {\r\n            if($location.path() == routeLink){\r\n                return 'make-active';\r\n            }\r\n        }\r\n    });\r\n}]);","mainApp.controller('galleryController', ['$scope', '$location', 'galleryModel', '$timeout', '$routeParams', 'Lightbox', 'galleryData',\r\n    function($scope, $location, galleryModel, $timeout, $routeParams, Lightbox, galleryData) {\r\n\r\n    ////get all galleries when page is loaded\r\n    //galleryModel.getAllGalleries().success(function(response){\r\n    //    //without timeout\r\n    //    //$scope.galleries = response;\r\n    //    //$scope.showGalleries = true;\r\n    //    $timeout(function(){\r\n    //        $scope.galleries = response;\r\n    //        $scope.showGalleries = true;\r\n    //    }, 1000);\r\n    //});\r\n\r\n        //refactored code, get all galleries when page is loaded\r\n        if(galleryData && galleryData.galleries != undefined){\r\n            galleryData.galleries.success(function(response){\r\n                $timeout(function(){\r\n                    $scope.galleries = response;\r\n                    $scope.showGalleries = true;\r\n                }, 1000);\r\n            });\r\n        }\r\n\r\n    ////single page gallery\r\n    //console.log($routeParams.id);\r\n    //if($routeParams.id){\r\n    //    galleryModel.getGalleryById($routeParams.id).success(function(response){\r\n    //        $scope.singleGallery = response;\r\n    //        console.log(response);\r\n    //    });\r\n    //}\r\n\r\n        //refactored code, single page gallery\r\n        if(galleryData && galleryData.singleGallery != undefined){\r\n            galleryData.singleGallery.success(function(response){\r\n                $scope.singleGallery = response;\r\n            });\r\n        }\r\n\r\n        $scope.$on('imageAdded', function(event, args){\r\n            $scope.singleGallery = args;\r\n            $scope.$apply();\r\n        });\r\n\r\n    //vars\r\n    angular.extend($scope, {\r\n        newGallery: {},\r\n        errorDiv: false,\r\n        errorMessages: [],\r\n        singleGallery: {},\r\n        dropzoneConfig: {\r\n            'options': { // passed into the Dropzone constructor\r\n                'url': baseUrl + 'upload-file'\r\n            },\r\n            'eventHandlers': {\r\n                'sending': function (file, xhr, formData) {\r\n                    //sending the response, file and galleryId\r\n                    console.log('Sending');\r\n                    formData.append('galleryId',$routeParams.id);\r\n                    //if you are using csrfToken\r\n                    //formData.append('_token', csrfToken);\r\n                },\r\n                'success': function (file, response) {\r\n                    //response is printed when post method is successful\r\n                    console.log(response);\r\n                    //add image immediately to the screen, when image is upload\r\n                    $scope.singleGallery.images.push(response);\r\n                    $scope.$emit('imageAdded', $scope.singleGallery);\r\n                }\r\n            }\r\n        }\r\n    });\r\n\r\n    //functions\r\n    angular.extend($scope, {\r\n       saveNewGallery: function(addGalleryForm){\r\n           //console.log(addGalleryForm); //you can see all build-in vars and use them; such as $valid\r\n           if(addGalleryForm.$valid){\r\n               //console.log('Correct');\r\n               $scope.formSubmitted = false;\r\n               galleryModel.saveGallery($scope.newGallery).success(function(response){\r\n                   $location.path('gallery/view');\r\n               });\r\n\r\n           } else {\r\n               //console.log('Error');\r\n               $scope.formSubmitted = true;\r\n           }\r\n       },\r\n        viewGallery: function(id){\r\n            $location.path('/gallery/view/' + id);\r\n        },\r\n        //lightbox\r\n        openLightboxModal: function (index) {\r\n            console.log($scope.singleGallery.images);\r\n            Lightbox.openModal($scope.singleGallery.images, index);\r\n        },\r\n        deleteImage: function(imageId) {\r\n            console.log(imageId);\r\n            var data = {\r\n                imageId: imageId,\r\n                galleryId: $routeParams.id\r\n            };\r\n            galleryModel.deleteSingleImage(data).success(function(response){\r\n                $scope.singleGallery = response;\r\n            });\r\n        }\r\n    });\r\n}]);"],"sourceRoot":"/source/"}